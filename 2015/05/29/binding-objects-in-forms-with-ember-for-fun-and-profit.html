<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><title>Binding Objects in Forms with Ember for Fun and Profit - Ragnarson Blog</title><meta content="summary" name="twitter:card" /><meta content="@ragnarsoncom" name="twitter:site" /><meta content="Ragnarson Blog" property="og:site_name" /><meta content="article" property="og:type" /><meta content="https://blog.ragnarson.com/2015/05/29/binding-objects-in-forms-with-ember-for-fun-and-profit.html" property="og:url" /><meta content="Binding Objects in Forms with Ember for Fun and Profit" property="og:title" /><meta content="Ever run into the situation where you had to perform some operation based on the value from select field? How did you handle it? Maybe multiple case / switch statements? Or if you are lucky enough and code in language with good support for metaprogramming like Ruby you can write some magic code like this one:

&quot;#{params[:type].classify}Calculation&quot;.constantize.new.calculate(params)

which in fact can be treated as hidden case statement, but much easier to handle.

Are there any cleaner solutions to such problems which would be more readable? Fortunately, the answer is yes - some frameworks like Ember give possibility to use cool patterns that are not possible in other cases." property="og:description" /><meta content="Karol Galanciak" name="author" /><meta content="https://blog.ragnarson.com/images/blog-embed-c040007b71.png" property="og:image" /><meta content="@azdaroth" name="twitter:creator" /><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Lato:400,700&subset=latin,latin-ext" rel="stylesheet" type="text/css" /><script type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"Ragnarson","url":"https://ragnarson.com"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","name":"Ragnarson Blog","url":"https://blog.ragnarson.com"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Person","name":"Karol Galanciak","image":"https://www.gravatar.com/avatar/40716cc1589577b8eb672d97953c264f.jpg?s=144&d=mm"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","headline":"Binding Objects in Forms with Ember for Fun and Profit","url":"https://blog.ragnarson.com/2015/05/29/binding-objects-in-forms-with-ember-for-fun-and-profit.html","author":{"@type":"Person","name":"Karol Galanciak","image":"https://www.gravatar.com/avatar/40716cc1589577b8eb672d97953c264f.jpg?s=144&d=mm"},"publisher":{"@type":"Organization","name":"Ragnarson","url":"https://ragnarson.com","logo":"https://blog.ragnarson.com/images/brand-c0054f1cec.svg"},"datePublished":"2015-05-29","dateModified":"2015-05-29"}</script><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link href="/stylesheets/application-c0f3339569.css" rel="stylesheet" /><link href="/favicon-152-c0fe5a334d.png" rel="apple-touch-icon-precomposed" /><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-11839548-2');
ga('set', 'allowAdFeatures', false);
ga('set', 'anonymizeIp', true);
ga('send', 'pageview');
</script>
</head><body><div class="container nav-container"><nav class="navbar navbar-dark navbar-toggleable-md"><button aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right" data-target="#navbarResponsive" data-toggle="collapse" type="button"><i class="icon-menu"></i></button><a href="https://ragnarson.com" class="nav-brand navbar-logo"><img src="/images/brand-c0054f1cec.svg" title="Ragnarson Blog" width="220px" alt="Brand" /></a><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="nav navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Why us</a><div class="dropdown-menu"><a href="https://ragnarson.com/manifesto" class="dropdown-item">Manifesto</a><a href="https://ragnarson.com/team" class="dropdown-item">Team</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Services</a><div class="dropdown-menu"><a href="https://ragnarson.com/software-development" class="dropdown-item">Software Development</a><a href="https://ragnarson.com/fund" class="dropdown-item">Fund</a><a href="https://ragnarson.com/advisory" class="dropdown-item">Advisory</a></div></li><li class="nav-item"><a href="https://ragnarson.com/case-studies" class="nav-link">Case studies</a></li><li class="nav-item"><a href="https://ragnarson.com/?utm_source=ragnarson&amp;utm_medium=blog&amp;utm_campaign=blog-header#the-contact-form" class="nav-link">Contact</a></li><li class="nav-item"><a href="/" class="active nav-link">Blog</a></li><li class="nav-item"><a href="https://ragnarson.com/careers" class="nav-link">Careers</a></li></ul></div></nav></div><div class="newsletter-show newsletter-container" id="js-box"><div class="newsletter-toggler"><i class="icon-chevron-right" id="js-arrow"></i></div><div class="newsletter-box"><div class="newsletter-popup"><div id="mc_embed_signup">
  <form action="//ragnarson.us10.list-manage.com/subscribe/post?u=6a4a4d00f989604300f83d3de&amp;id=6adadf2f44" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL" class="newsletter-label">
        Sign up for our newsletter and get notifications about new articles on your email
      </label>

      <div class="row">
        <div class="three-thirds">
          <input type="email" value="" name="EMAIL" class="newsletter-input" id="mce-EMAIL" placeholder="Your email address" required>

          <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
          <div class="signup_hidden">
            <input type="text" name="b_6a4a4d00f989604300f83d3de_6adadf2f44" tabindex="-1" value="" class="one-half">
          </div>
        </div>

        <div class="mt-3 text-center">
          <input type="submit" value="Join our newsletter" name="subscribe" id="mc-embedded-subscribe" class="btn newsletter-btn">
        </div>
      </div>
    </div>
  </form>
</div>
</div></div></div><div id="main" role="main"><div class="article"><header><img src="https://www.gravatar.com/avatar/40716cc1589577b8eb672d97953c264f.jpg?s=144&amp;d=mm" class="avatar" width="72px" size="72px" alt="40716cc1589577b8eb672d97953c264f" /><div class="article-meta">May 29, 2015 - <a href="/authors/karol-galanciak.html">Karol Galanciak</a>  in <a href="/categories/development.html">development</a></div><h1 class="article-title"><a href="/2015/05/29/binding-objects-in-forms-with-ember-for-fun-and-profit.html">Binding Objects in Forms with Ember for Fun and Profit</a></h1></header><p>Ever run into the situation where you had to perform some operation based on the value from select field? How did you handle it? Maybe multiple case / switch statements? Or if you are lucky enough and code in language with good support for metaprogramming like Ruby you can write some magic code like this one:</p>
<pre class="highlight ruby"><code><span class="s2">"</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:type</span><span class="p">].</span><span class="nf">classify</span><span class="si">}</span><span class="s2">Calculation"</span><span class="p">.</span><span class="nf">constantize</span><span class="p">.</span><span class="nf">new</span><span class="p">.</span><span class="nf">calculate</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</code></pre>

<p>which in fact can be treated as hidden case statement, but much easier to handle.</p>

<p>Are there any cleaner solutions to such problems which would be more readable? Fortunately, the answer is yes - some frameworks like Ember give possibility to use cool patterns that are not possible in other cases. </p>

<h2>Binding Objects In Forms</h2>

<p>The great thing about Ember is that you can easily bind objects in e.g. select fields instead of raw strings. Check the example below:</p>
<pre class="highlight handlebars"><code><span class="k">{{</span><span class="nv">view</span> <span class="s2">"select"</span>
  <span class="nv">content</span><span class="o">=</span><span class="nv">calculationStrategies</span>
  <span class="nv">selection</span><span class="o">=</span><span class="nv">currentCalculationStrategy</span>
  <span class="nv">optionValuePath</span><span class="o">=</span><span class="s2">"content"</span>
  <span class="nv">optionLabelPath</span><span class="o">=</span><span class="s2">"content.name"</span>
  <span class="nv">multiple</span><span class="o">=</span><span class="kc">false</span><span class="k">}}</span>
</code></pre>

<p>In most cases you would probably use something like <code>content.type</code> for <code>optionValuePath</code> or even use just an array of strings as <code>calculationStrategies</code> and not using <code>optionValuePath</code> and <code>optionLabelPath</code> at all. But here we are going to do something fancier - bind object directly.  So what is the <code>calculationStrategies</code> in this case?  It&#39;s an array of objects, let&#39;s call them Option Value Objects. Our component (or controller) could look like this:</p>
<pre class="highlight javascript"><code><span class="kr">import</span> <span class="nx">Ember</span> <span class="nx">from</span> <span class="s1">'ember'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="na">init</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'currentCalculationStrategy'</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">someCalculationStrategy</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="na">calculate</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">propertyA</span><span class="p">,</span> <span class="nx">propertyB</span><span class="p">,</span> <span class="nx">propertyC</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// some complex logic</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">create</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">evenBetterCalculationStrategy</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="na">calculate</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">propertyA</span><span class="p">,</span> <span class="nx">propertyB</span><span class="p">,</span> <span class="nx">propertyC</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// super complex calculations go here</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">create</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'container'</span><span class="p">).</span><span class="nx">lookup</span><span class="p">(</span><span class="s1">'utils:t'</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">someStrategy</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="na">name</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">t</span><span class="p">(</span><span class="s1">'calculation_strategies.some_strategy'</span><span class="p">);</span>
      <span class="p">}.</span><span class="nx">property</span><span class="p">(),</span>

      <span class="na">strategy</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">someCalculationStrategy</span><span class="p">;</span>
      <span class="p">}.</span><span class="nx">property</span><span class="p">()</span>
    <span class="p">}).</span><span class="nx">create</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">evenBetterStrategy</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="na">name</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">t</span><span class="p">(</span><span class="s1">'calculation_strategies.even_better_strategy'</span><span class="p">);</span>
      <span class="p">}.</span><span class="nx">property</span><span class="p">(),</span>

      <span class="na">strategy</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">evenBetterCalculationStrategy</span><span class="p">;</span>
      <span class="p">}.</span><span class="nx">property</span><span class="p">()</span>
    <span class="p">}).</span><span class="nx">create</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'calculationStrategies'</span><span class="p">,</span>
      <span class="nx">Ember</span><span class="p">.</span><span class="nx">A</span><span class="p">([</span><span class="nx">someStrategy</span><span class="p">,</span> <span class="nx">evenBetterStrategy</span><span class="p">]));</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="na">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">perform</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'currentCalculationStrategy.strategy'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">calculate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'propertyA'</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'propertyB'</span><span class="p">),</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'yetAnotherProperty'</span><span class="p">));</span>
      <span class="c1">// do something here with the value</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>What happens in our component? Firstly, we initialize some properties and service objects, which need to respond to the same method (<code>calculate</code> in this case) and then there&#39;s a key part: instantiating some option value objects implementing the same interface: <code>name</code> and <code>strategy</code> methods. In <code>strategy</code> we just return the service object responsible for some kind of calculations and in name we take advantage of internationalization. Lastly, we set <code>calculationStrategies</code> to be an array of our option value objects.</p>

<p>The setup may seem a bit complex. Was it worth it? Looking at the <code>perform</code> action it was definitely worth doing. No switch / if statements based on selected value - we simply take the selected object and its strategy and call the <code>calculate</code> method on it with some other properties as arguments. Code looks clean and is simple to maintain, it just requires adding more objects implementing the same interface if we want to have more strategies. To avoid validation for checking if any strategy was selected we can just decide on the default one.</p>

<h2>Wrapping Up</h2>

<p>Developing Single Page Applications with Ember brings some new ideas and patterns that may not be possible in other cases. By using polymorphism and binding directly to objects in inputs instead of raw values we can write code that is both beautiful and easy to maintain.</p>
<div class="work-with-us"><p>At Ragnarson we help companies deliver great products. We take care of development and deployment so that they can focus on growing the product and working with customers.</p><a class="btn" href="https://ragnarson.com/?utm_source=ragnarson&utm_medium=blog&utm_campaign=work-with-us#contact">Work with us</a></div><div class="article-comments"><div id="commento"></div>
<script src="https://cdn.commento.io/js/commento.js"></script>
</div></div><footer><div class="text--center"><a href="https://ragnarson.com/?utm_source=ragnarson&amp;utm_medium=blog&amp;utm_campaign=blog-footer"><img src="/images/ragnar-desk-c0d025368e.png" srcset="/images/ragnar-desk-c0d025368e.png 1x, /images/ragnar-desk-2x-c0332b062e.png 2x" alt="Ragnar desk" /></a></div></footer></div><script src="/javascripts/application-c0ec307bf9.js"></script></body></html>