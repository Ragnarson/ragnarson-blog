<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><title>Synchronize your settings with Dropbox and Mackup - Ragnarson Blog</title><meta content="summary" name="twitter:card" /><meta content="@ragnarsoncom" name="twitter:site" /><meta content="Ragnarson Blog" property="og:site_name" /><meta content="article" property="og:type" /><meta content="https://blog.ragnarson.com/2014/01/23/synchronize-your-settings-with-dropbox-and-mackup.html" property="og:url" /><meta content="Synchronize your settings with Dropbox and Mackup" property="og:title" /><meta content="Most of the developers are creatures of habit. Once they get comfortable
with an editor, a set of shortcuts or a terminal setup they tend to stick
to it for a long time. In this post I will show how to share and keep
application configs and so called dotfiles in sync across machines.
It's very useful when you have a desktop at the office and a laptop at home.

To accomplish that we are going to use a simple tool called
mackup and Dropbox.
Mackup keeps your application settings in sync using Dropbox as a storage.
It can be installed using homebrew or downloaded as a script,
we will do the latter because we want to modify this script later on." property="og:description" /><meta content="Mariusz Pietrzyk" name="author" /><meta content="https://blog.ragnarson.com/images/blog-embed-c040007b71.png" property="og:image" /><meta content="@wijet" name="twitter:creator" /><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css" /><link href="https://fonts.googleapis.com/css?family=Lato:400,700&subset=latin,latin-ext" rel="stylesheet" type="text/css" /><script type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"Ragnarson","url":"https://ragnarson.com"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","name":"Ragnarson Blog","url":"https://blog.ragnarson.com"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Person","name":"Mariusz Pietrzyk","image":"https://www.gravatar.com/avatar/d87b50f7d7d0b0314dc4714a247c2022.jpg?s=144&d=mm"}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","headline":"Synchronize your settings with Dropbox and Mackup","url":"https://blog.ragnarson.com/2014/01/23/synchronize-your-settings-with-dropbox-and-mackup.html","author":{"@type":"Person","name":"Mariusz Pietrzyk","image":"https://www.gravatar.com/avatar/d87b50f7d7d0b0314dc4714a247c2022.jpg?s=144&d=mm"},"publisher":{"@type":"Organization","name":"Ragnarson","url":"https://ragnarson.com","logo":"https://blog.ragnarson.com/images/brand-c0054f1cec.svg"},"datePublished":"2014-01-23","dateModified":"2014-01-23"}</script><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link href="/stylesheets/application-c0f3339569.css" rel="stylesheet" /><link href="/favicon-152-c0fe5a334d.png" rel="apple-touch-icon-precomposed" /><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-11839548-2');
ga('set', 'allowAdFeatures', false);
ga('set', 'anonymizeIp', true);
ga('send', 'pageview');
</script>
</head><body><div class="container nav-container"><nav class="navbar navbar-dark navbar-toggleable-md"><button aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right" data-target="#navbarResponsive" data-toggle="collapse" type="button"><i class="icon-menu"></i></button><a href="https://ragnarson.com" class="nav-brand navbar-logo"><img src="/images/brand-c0054f1cec.svg" title="Ragnarson Blog" width="220px" alt="Brand" /></a><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="nav navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Why us</a><div class="dropdown-menu"><a href="https://ragnarson.com/manifesto" class="dropdown-item">Manifesto</a><a href="https://ragnarson.com/team" class="dropdown-item">Team</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Services</a><div class="dropdown-menu"><a href="https://ragnarson.com/software-development" class="dropdown-item">Software Development</a><a href="https://ragnarson.com/fund" class="dropdown-item">Fund</a><a href="https://ragnarson.com/advisory" class="dropdown-item">Advisory</a></div></li><li class="nav-item"><a href="https://ragnarson.com/case-studies" class="nav-link">Case studies</a></li><li class="nav-item"><a href="https://ragnarson.com/?utm_source=ragnarson&amp;utm_medium=blog&amp;utm_campaign=blog-header#the-contact-form" class="nav-link">Contact</a></li><li class="nav-item"><a href="/" class="active nav-link">Blog</a></li><li class="nav-item"><a href="https://ragnarson.com/careers" class="nav-link">Careers</a></li></ul></div></nav></div><div class="newsletter-show newsletter-container" id="js-box"><div class="newsletter-toggler"><i class="icon-chevron-right" id="js-arrow"></i></div><div class="newsletter-box"><div class="newsletter-popup"><div id="mc_embed_signup">
  <form action="//ragnarson.us10.list-manage.com/subscribe/post?u=6a4a4d00f989604300f83d3de&amp;id=6adadf2f44" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL" class="newsletter-label">
        Sign up for our newsletter and get notifications about new articles on your email
      </label>

      <div class="row">
        <div class="three-thirds">
          <input type="email" value="" name="EMAIL" class="newsletter-input" id="mce-EMAIL" placeholder="Your email address" required>

          <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
          <div class="signup_hidden">
            <input type="text" name="b_6a4a4d00f989604300f83d3de_6adadf2f44" tabindex="-1" value="" class="one-half">
          </div>
        </div>

        <div class="mt-3 text-center">
          <input type="submit" value="Join our newsletter" name="subscribe" id="mc-embedded-subscribe" class="btn newsletter-btn">
        </div>
      </div>
    </div>
  </form>
</div>
</div></div></div><div id="main" role="main"><div class="article"><header><img src="https://www.gravatar.com/avatar/d87b50f7d7d0b0314dc4714a247c2022.jpg?s=144&amp;d=mm" class="avatar" width="72px" size="72px" alt="D87b50f7d7d0b0314dc4714a247c2022" /><div class="article-meta">January 23, 2014 - <a href="/authors/mariusz-pietrzyk.html">Mariusz Pietrzyk</a>  in <a href="/categories/development.html">development</a></div><h1 class="article-title"><a href="/2014/01/23/synchronize-your-settings-with-dropbox-and-mackup.html">Synchronize your settings with Dropbox and Mackup</a></h1></header><div class="article-notice">This article was originally posted on the Shelly Cloud blog, our Ruby
platform as a service that we have decided to shut down on October 2015.</div><p>Most of the developers are creatures of habit. Once they get comfortable
with an editor, a set of shortcuts or a terminal setup they tend to stick
to it for a long time. In this post I will show how to share and keep
application configs and so called dotfiles in sync across machines.
It&#39;s very useful when you have a desktop at the office and a laptop at home.</p>

<p>To accomplish that we are going to use a simple tool called
<a href="https://github.com/lra/mackup">mackup</a> and <a href="https://www.dropbox.com">Dropbox</a>.
Mackup keeps your application settings in sync using Dropbox as a storage.
It can be installed using homebrew or downloaded as a script,
we will do the latter because we want to modify this script later on. </p>

<p>Before you start make sure Dropbox is configured on all machines.</p>

<h2>Setting up mackup on the current machine</h2>

<ol>
<li><p>Install mackup script on Dropbox</p>
<pre class="highlight shell"><code>mkdir -p ~/Dropbox/Mackup/bin
curl -o ~/Dropbox/Mackup/bin/mackup https://raw2.github.com/lra/mackup/036575af6cf41ac0ad85f853107c93ab3ada7509/mackup.py
chmod +x ~/Dropbox/Mackup/bin/mackup
</code></pre></li>
<li><p>Add mackup to your <code>$PATH</code>. Most likely you want to put that in the
<code>~/.bashrc</code> or <code>~/.zshrc</code> (then reload your environment with <code>source ~/.zsh</code>
or <code>source ~/.bashrc</code>)</p>
<pre class="highlight shell"><code><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>~/Dropbox/Mackup/bin/mackup:<span class="nv">$PATH</span>
</code></pre></li>
<li><p>Create <code>~/.mackup.cfg</code> and specify which applications you want to keep in
sync, or which you don&#39;t want to. I don&#39;t recommend leaving it blank
which will sync all supported applications because it forces some unsecure
defaults, like storing private SSH keys on Dropbox. Below is an example,
the full list of supported applications can be found on
<a href="https://github.com/lra/mackup">project&#39;s site</a>.</p>
<pre class="highlight plaintext"><code>[Allowed Applications]
Adium
TextMate
Zsh
Spotify
Screen
Ruby
Pow
Oh My Zsh
Git
Colloquy
Ack
Curl
Mackup
Chef
</code></pre></li>
<li><p>Run <code>mackup backup</code> to move all your configs to <code>~/Dropbox/Mackup</code> and
then symlink them back to the right places on your system.</p>
<pre class="highlight plaintext"><code>mackup backup
</code></pre></li>
</ol>

<h2>Setting mackup on the remaining machines</h2>

<p>Now it&#39;s time to use configs from Dropbox on other machine(s).
The steps below need to be performed on all remaining computers.</p>

<ol>
<li><p>Add mackup to your <code>$PATH</code> as in step 2 of the &quot;Setting up mackup on the
current machine&quot; part.</p></li>
<li><p>Run <code>mackup restore</code> to link all configs from Dropbox to your system.</p>
<pre class="highlight plaintext"><code>mackup restore
</code></pre></li>
</ol>

<h2>Custom file list</h2>

<p>What if you want to keep a custom directory in sync? I for example
keep some of my pet projects on Dropbox, despite the fact that I use Git
for them. This allows me to quickly change machines without having to
git commit &amp; push. Also it keeps development
configs/sqlite databases/binaries/logs in sync across machines which usually
shouldn&#39;t be in a git repo.</p>

<p>For now there is no easy way to specify the list of custom files that
we want to sync with mackup. There is a
<a href="https://github.com/lra/mackup/pull/71">a pull request</a>
adding this functionality, which hopefully will be merged soon.</p>

<p>Nothing is lost! We can edit the script to handle custom files and adjust
existing formulas.</p>

<p>First we will prevent from syncing SSH private keys. It&#39;s just as simple
as editing a hash.</p>

<p>Open <code>~/Dropbox/Mackup/bin/mackup</code> in your favorite editor and replace</p>
<pre class="highlight python"><code><span class="s">'SSH'</span><span class="p">:</span> <span class="p">[</span><span class="s">'.ssh'</span><span class="p">],</span>
</code></pre>

<p>with</p>
<pre class="highlight python"><code><span class="s">'SSH'</span><span class="p">:</span> <span class="p">[</span><span class="s">'.ssh/config'</span><span class="p">,</span> <span class="s">'.ssh/known_hosts'</span><span class="p">],</span>
</code></pre>

<p>Now you can add SSH to <code>~/.mackup.cfg</code> and run <code>mackup backup</code> on your current
machine and <code>mackup restore</code> on the rest of them.</p>

<p>If you want to add a custom directory just create a new key in the hash and
add it&#39;s name to <code>~/.mackup.cfg</code> and run mackup backup/restore again.</p>
<pre class="highlight plaintext"><code>'My Projects': ['projects/my', 'projects/go']
</code></pre>

<p>Last but not least, as a side effect of using Dropbox your configs will be
backed up and versioned (meaning you can restore old configs).</p>

<p>How do you manage your configs? I would love to hear about your setups in comments.</p>
<div class="article-author-note">COO at Ragnarson. Built self-managed remote dev company. Decentralisation & blockchain believer. Ruby ex-developer. Motorcyclist, cat owner. Here is my <a href="https://wijet.pl">home page</a>.</div><div class="work-with-us"><p>At Ragnarson we help companies deliver great products. We take care of development and deployment so that they can focus on growing the product and working with customers.</p><a class="btn" href="https://ragnarson.com/?utm_source=ragnarson&utm_medium=blog&utm_campaign=work-with-us#contact">Work with us</a></div><div class="article-comments"><div id="commento"></div>
<script src="https://cdn.commento.io/js/commento.js"></script>
</div></div><footer><div class="text--center"><a href="https://ragnarson.com/?utm_source=ragnarson&amp;utm_medium=blog&amp;utm_campaign=blog-footer"><img src="/images/ragnar-desk-c0d025368e.png" srcset="/images/ragnar-desk-c0d025368e.png 1x, /images/ragnar-desk-2x-c0332b062e.png 2x" alt="Ragnar desk" /></a></div></footer></div><script src="/javascripts/application-c0ec307bf9.js"></script></body></html>